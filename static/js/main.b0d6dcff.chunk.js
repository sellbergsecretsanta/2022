(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,a){e.exports=a(77)},47:function(e,t,a){},48:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(37),s=a.n(c),l=(a(47),a(6)),o=(a(48),a(7)),i="https://api.jsonbin.io/v3/b",u="login_access_token";var m=Object(o.g)(function(e){function t(){localStorage.removeItem(u),e.history.push("/")}return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark-blue"},r.a.createElement("div",{className:"row col-12 d-flex text-white"},r.a.createElement("span",{className:"h3"},localStorage.getItem(u)?"Secret Santa":"Login"),r.a.createElement("div",{className:"ml-auto"},"/home"===e.location.pathname?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-primary mr-2",onClick:function(){return e.history.push("/wishlist")}},"Barnens \xf6nskelista"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t()}},"Logga ut")):"/wishlist"===e.location.pathname?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-primary mr-2",onClick:function(){return e.history.push("/home")}},"Secret Santa"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return t()}},"Logga ut")):void 0)))}),d=a(9),f=a.n(d),p=a(16),h=a(19),b=a(2),v=a(18),g=a.n(v),E=a(40),w=a.n(E);a(73);var O=Object(o.g)(function(e){var t=Object(n.useState)({username:"",password:"",successMessage:null}),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)([]),m=Object(l.a)(o,2),d=m[0],v=m[1];Object(n.useEffect)(function(){O()},[]);var E=function(e){var t=e.target,a=t.id,n=t.value;s(function(e){return Object(b.a)({},e,Object(h.a)({},a,n))})},O=function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.a.get(i+"/634b1ec265b57a31e6979cee/latest").then(function(e){for(var t=[],a=t.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),r=[t[n],t[a]];t[a]=r[0],t[n]=r[1]}t.forEach(function(e){console.log(e.secretsanta)}),e.data.record.forEach(function(e){e.lastUpdated&&""!==e.wishlist&&t.push({lastUpdated:w()(e.lastUpdated).format("YYYY-MM-DD kk:mm"),name:e.name})}),v(t.sort(function(e,t){return new Date(t.lastUpdated)-new Date(e.lastUpdated)}))}).catch(function(e){console.log(e)});case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){e.updateTitle("Home"),e.history.push("/home")};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card col-md-6 col-sm-12 login-card p-3 mt-2 hv-center"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputUsername1"},"Anv\xe4ndarnamn"),r.a.createElement("input",{type:"username",className:"form-control",id:"username","aria-describedby":"usernameHelp",placeholder:"Skriv anv\xe4ndarnamn",value:c.username,onChange:E})),r.a.createElement("div",{className:"form-group text-left"},r.a.createElement("label",{htmlFor:"exampleInputPassword1"},"L\xf6senord"),r.a.createElement("input",{type:"password",className:"form-control",id:"password",placeholder:"L\xf6senord",value:c.password,onChange:E})),r.a.createElement("div",{className:"form-check"}),r.a.createElement("button",{type:"submit",className:"btn btn-dark-blue",onClick:function(t){t.preventDefault();var a={username:c.username,password:c.password};g.a.get(i+"/634b1cf92b3499323bdfd5de").then(function(t){if(console.log(t),200===t.status){var n=t.data.record.find(function(e){return e.username===a.username.trim().toLowerCase()});if(n)if(n&&n.password!==a.password)e.showError("Username and password do not match");else{s(function(e){return Object(b.a)({},e,{successMessage:"Login successful. Redirecting to home page.."})});var r=n.id;localStorage.setItem(u,r),j(),e.showError(null)}else e.showError("Username does not exists")}else e.showError("Something went wrong")}).catch(function(e){console.log(e)})}},"Logga in")),r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:c.successMessage?"block":"none"},role:"alert"},c.successMessage)),d.length>0&&r.a.createElement("div",{className:"card col-md-6 col-sm-12 login-card p-3 mt-2 hv-center"},r.a.createElement("p",{className:"mt-2"},"Senast uppdaterade \xf6nskelistor"),r.a.createElement("hr",{className:"mt-0"}),d.length>0&&d.map(function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement("div",{className:"col-4"},e.name),r.a.createElement("div",{className:"col-8"},e.lastUpdated))})))}),j=a(17),k=a(78),N=a(80);var S=function(e){var t=Object(n.useState)(e.wishlistText?e.wishlistText:""),a=Object(l.a)(t,2),c=a[0],s=a[1];return r.a.createElement(k.a,null,r.a.createElement(k.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1"},r.a.createElement(k.a.Label,null,e.name?"".concat(e.name,"s \xf6nskelista"):"Din \xf6nskelista"),r.a.createElement(k.a.Control,{as:"textarea",rows:4,value:c,onChange:function(e){return s(e.target.value)},disabled:e.disabled})),!e.disabled&&(e.isSaving?r.a.createElement("div",{className:"alert alert-success mt-2",style:{display:e.isSaving?"block":"none"},role:"alert"},"Sparar..."):r.a.createElement(N.a,{className:"btn-dark-blue",type:"button",onClick:e.onSaveWishlist?function(){return e.onSaveWishlist(c)}:void 0},"Spara")))};var y=Object(o.g)(function(e){var t=Object(n.useState)(void 0),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(void 0),m=Object(l.a)(o,2),d=m[0],h=m[1],v=Object(n.useState)(!1),E=Object(l.a)(v,2),w=E[0],O=E[1];function k(){e.history.push("/")}Object(n.useEffect)(function(){N()},[]);var N=function(){g.a.get(i+"/634b1ec265b57a31e6979cee/latest").then(function(t){200!==t.status&&k();var a=t.data.record.find(function(e){return e.id===parseInt(localStorage.getItem(u))});a?(s(a),void 0!==a.secretsanta&&null!==a.secretsanta&&h(t.data.record.find(function(e){return e.id===a.secretsanta}))):localStorage.getItem(u)?e.history.push("/wishlist"):k()}).catch(function(e){k()})},y=function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(i+"/634b1ec265b57a31e6979cee/latest").then(function(e){return e.data.record}).catch(function(e){console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),x=function(e){g.a.put(i+"/634b1ec265b57a31e6979cee ",e).then(function(e){O(!1),N()}).catch(function(e){O(!1)})},I=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,y();case 3:a=e.sent,n=a.map(function(e){return e.id===parseInt(localStorage.getItem(u))?Object(b.a)({},e,{wishlist:t,lastUpdated:new Date}):e}),x(n);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(f.a.mark(function e(){var t,a,n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,y();case 3:t=e.sent;case 4:if(a=M(t),n=a.successful,r=a.updatedUsers,!n){e.next=9;break}return x(r),e.abrupt("break",11);case 9:e.next=4;break;case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),M=function(e){var t=Object(j.a)(e),a=t.slice(),n=t.slice();for(a.sort(function(){return.5-Math.random()}),n.sort(function(){return.5-Math.random()});a.length;){var r=a.pop(),c=n[0]===r?n.pop():n.shift();if(r.partner===c.partner)return{successful:!1,updatedUsers:e};e=e.map(function(e){return e.id===r.id?Object(b.a)({},e,{secretsanta:c.id}):e})}return{successful:!0,updatedUsers:e}},U=function(){var e=Object(p.a)(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,y();case 3:t=e.sent,a=F(t),x(a);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),F=function(e){return e=e.map(function(e){return Object(b.a)({},e,{secretsanta:null})})};return r.a.createElement("div",{className:"card col-md-6 col-sm-12 mt-4 p-3"},c&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mt-2"},"Frivillig \xf6nskelista! ",r.a.createElement("br",null),'\xd6nskar du dig inget speciellt? Skriv "\xf6verraskning"'),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(S,{wishlistText:c.wishlist,onSaveWishlist:function(e){return I(e)},isSaving:w})))),d&&r.a.createElement("div",{className:"row mt-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement(S,{name:d.name,wishlistText:d.wishlist,disabled:!0}))),c&&"0"===localStorage.getItem(u)&&r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{className:"btn btn-dark-blue",onClick:function(){window.confirm("Vill du slumpa secret santa?")&&C()}},"Assign secret santa")),r.a.createElement("div",{className:"col-6"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(){window.confirm("Vill nollst\xe4lla secret santa?")&&U()}},"Reset secret santa"))))}),x=a(3);var I=function(e){var t=e.children,a=Object(x.a)(e,["children"]);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){var a=e.location;return localStorage.getItem(u)?t:r.a.createElement(o.a,{to:{pathname:"/login",state:{from:a}}})}}))},C=a(20);a(75);var M=function(e){var t=Object(n.useState)("none"),a=Object(l.a)(t,2),c=a[0],s=a[1],o=function(){s("none"),e.hideError(null)};return Object(n.useEffect)(function(){null!==e.errorMessage?s("block"):o()}),r.a.createElement("div",{className:"col-md-6 col-sm-12 alert alert-danger alert-dismissable mt-4",role:"alert",id:"alertPopUp",style:{display:c}},r.a.createElement("div",{className:"d-flex alertMessage"},r.a.createElement("span",null,e.errorMessage),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:function(){return o()}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))},U=a(79);var F=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),c=a[0],s=a[1];return r.a.createElement(k.a,null,r.a.createElement(k.a.Group,{className:"mb-3 card-body",controlId:"exampleForm.ControlTextarea1"},r.a.createElement("h4",null,e.child.name),r.a.createElement("div",{className:"ml-4"},e.child.wishlist.map(function(t){return r.a.createElement(k.a.Check,{key:"".concat(e.child.id).concat(t.id),type:"checkbox"},r.a.createElement(k.a.Check.Input,{id:t.id,type:"checkbox",onChange:function(){return e.onUpdateWishlistItem(e.child.id,t.id)},checked:null!==t.owner,disabled:null!==t.owner&&t.owner!==e.ownerId}),r.a.createElement(k.a.Check.Label,{style:{textDecoration:null!==t.owner&&t.owner!==e.ownerId?"line-through":"none"},title:null!==t.owner&&t.owner!==e.ownerId?"N\xe5gon har redan kryssat denna":"",htmlFor:t.id},t.text),e.child.parents.includes(e.ownerId)&&null===t.owner&&r.a.createElement("i",{className:"fa fa-trash-o pl-2",onMouseOver:function(e){return e.target.className="fa fa-trash pl-2"},onMouseOut:function(e){return e.target.className="fa fa-trash-o pl-2"},style:{cursor:"pointer"},onClick:function(){return a=t.id,void e.onRemoveItem(e.child.id,a);var a}}),e.isSaving&&JSON.stringify(e.isSaving)===JSON.stringify([e.child.id,t.id])&&r.a.createElement("i",{className:"fa fa-spinner fa-spin ml-2"}))})),e.child.parents.includes(e.ownerId)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{size:"sm"},r.a.createElement(N.a,{size:"sm",variant:"outline-secondary",id:"add".concat(e.child.id),disabled:e.isSaving,onClick:function(){return e.onAddItem(e.child.id,c),void s("")}},e.isSaving===e.child.id?r.a.createElement("i",{className:"fa fa-spinner fa-spin"}):"L\xe4gg till"),r.a.createElement(k.a.Control,{value:c,onChange:function(e){return s(e.target.value)},placeholder:"",describedby:"add".concat(e.child.id)})))))};var L=Object(o.g)(function(e){var t=Object(n.useState)(void 0),a=Object(l.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)([]),m=Object(l.a)(o,2),d=m[0],h=m[1],v=Object(n.useState)(!1),E=Object(l.a)(v,2),w=E[0],O=E[1];Object(n.useEffect)(function(){localStorage.getItem(u)?s(parseInt(localStorage.getItem(u))):e.history.push("/"),k()},[]);var k=function(){var e=Object(p.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(i+"/636eba4965b57a31e6b4cdc9/latest").then(function(e){h(e.data.record),O(!1)}).catch(function(e){console.log(e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(f.a.mark(function e(t,a){var n,r,c,s,l;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O(t),n=Object(j.a)(d),r=Object(j.a)(n).filter(function(e){return e.id===t}),c=Math.max.apply(Math,Object(j.a)(r[0].wishlist.map(function(e){return e.id}))),s={id:c+1,text:a,owner:null},l=n.map(function(e){return e.id===t?Object(b.a)({},e,{wishlist:[].concat(Object(j.a)(e.wishlist),[s])}):e}),y(l);case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(f.a.mark(function e(t,a){var n,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O([t,a]),n=Object(j.a)(d),r=n.map(function(e){return e.id===t?Object(b.a)({},e,{wishlist:Object(j.a)(e.wishlist.filter(function(e){return e.id!==a}))}):e}),y(r);case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),y=function(e){g.a.put(i+"/636eba4965b57a31e6b4cdc9 ",e).then(function(e){k()}).catch(function(e){O(!1)})};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card col-md-6 col-sm-12 mt-4 p-3"},void 0!==c&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},d&&d.map(function(e){return r.a.createElement(F,{key:e.id,child:e,ownerId:c,onUpdateWishlistItem:function(e,t){return function(e,t){O([e,t]);var a=Object(j.a)(d).map(function(a){return a.id===e?Object(b.a)({},a,{wishlist:Object(j.a)(a.wishlist).map(function(e){return e.id===t?Object(b.a)({},e,{owner:e.owner===c?null:c}):e})}):a});y(a)}(e,t)},onAddItem:function(e,t){return N(e,t)},onRemoveItem:function(e,t){return S(e,t)},isSaving:w})})))))});var T=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(null),i=Object(l.a)(s,2),u=i[0],d=i[1];return r.a.createElement(C.a,{basename:"/2022"},r.a.createElement("div",{className:"App"},r.a.createElement(m,{title:a}),r.a.createElement("div",{className:"container flex-column"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0},r.a.createElement(O,{showError:d,updateTitle:c})),r.a.createElement(o.b,{path:"/login"},r.a.createElement(O,{showError:d,updateTitle:c})),r.a.createElement(I,{path:"/home"},r.a.createElement(y,null)),r.a.createElement(I,{path:"/wishlist"},r.a.createElement(L,null))),r.a.createElement(M,{errorMessage:u,hideError:d}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(76);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[42,1,2]]]);
//# sourceMappingURL=main.b0d6dcff.chunk.js.map